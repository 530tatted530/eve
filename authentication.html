
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Authentication and Authorization &#8212; Eve 0.10.dev0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Funding" href="funding.html" />
    <link rel="prev" title="Data Validation" href="validation.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="authentication-and-authorization">
<span id="auth"></span><h1>Authentication and Authorization<a class="headerlink" href="#authentication-and-authorization" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction-to-security">
<h2>Introduction to Security<a class="headerlink" href="#introduction-to-security" title="Permalink to this headline">¶</a></h2>
<p>Authentication is the mechanism whereby systems may securely identify their
users. Eve supports several authentication schemes: Basic Authentication, Token
Authentication, HMAC Authentication. <a class="reference internal" href="#oauth2-integration">OAuth2 integration</a> is easily
accomplished.</p>
<p>Authorization is the mechanism by which a system determines what level of
access a particular (authenticated) user should have access to resources
controlled by the system. In Eve, you can restrict access to all API endpoints,
or only some of them. You can protect some HTTP verbs while leaving others
open. For example, you can allow public read-only access while leaving item
creation and edition restricted to authorized users only. You can also allow
<code class="docutils literal notranslate"><span class="pre">GET</span></code> access for certain requests and <code class="docutils literal notranslate"><span class="pre">POST</span></code> access for others by checking
the method parameter. There is also support for role-based access control.</p>
<p>Security is one of those areas where customization is very important. This is
why you are provided with a handful of base authentication classes. They
implement the basic authentication mechanism and must be subclassed in order
to implement authorization logic. No matter which authentication scheme you
pick the only thing that you need to do in your subclass is override the
<code class="docutils literal notranslate"><span class="pre">check_auth()</span></code> method.</p>
</div>
<div class="section" id="global-authentication">
<h2>Global Authentication<a class="headerlink" href="#global-authentication" title="Permalink to this headline">¶</a></h2>
<p>To enable authentication for your API just pass the custom auth class on
app instantiation. In our example we’re going to use the <code class="docutils literal notranslate"><span class="pre">BasicAuth</span></code> base
class, which implements the <a class="reference internal" href="#basic"><span class="std std-ref">Basic Authentication</span></a> scheme:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">eve.auth</span> <span class="kn">import</span> <span class="n">BasicAuth</span>

<span class="k">class</span> <span class="nc">MyBasicAuth</span><span class="p">(</span><span class="n">BasicAuth</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">check_auth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">allowed_roles</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span>
                   <span class="n">method</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;admin&#39;</span> <span class="ow">and</span> <span class="n">password</span> <span class="o">==</span> <span class="s1">&#39;secret&#39;</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Eve</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="n">MyBasicAuth</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>All your API endpoints are now secured, which means that a client will need
to provide the correct credentials in order to consume the API:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> curl -i http://example.com
<span class="go">HTTP/1.1 401 UNAUTHORIZED</span>
<span class="go">Please provide proper credentials.</span>

<span class="gp">$</span> curl -H <span class="s2">&quot;Authorization: Basic YWRtaW46c2VjcmV0&quot;</span> -i http://example.com
<span class="go">HTTP/1.1 200 OK</span>
</pre></div>
</div>
<p>By default access is restricted to all endpoints for all HTTP verbs
(methods), effectively locking down the whole API.</p>
<p>But what if your authorization logic is more complex, and you only want to
secure some endpoints or apply different logics depending on the
endpoint being consumed? You could get away with just adding logic to your
authentication class, maybe with something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyBasicAuth</span><span class="p">(</span><span class="n">BasicAuth</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">check_auth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">allowed_roles</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">resource</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;zipcodes&#39;</span><span class="p">,</span> <span class="s1">&#39;countries&#39;</span><span class="p">):</span>
            <span class="c1"># &#39;zipcodes&#39; and &#39;countries&#39; are public</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># all the other resources are secured</span>
            <span class="k">return</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;admin&#39;</span> <span class="ow">and</span> <span class="n">password</span> <span class="o">==</span> <span class="s1">&#39;secret&#39;</span>
</pre></div>
</div>
<p>If needed, this approach also allows to take the request <code class="docutils literal notranslate"><span class="pre">method</span></code> into
consideration, for example to allow <code class="docutils literal notranslate"><span class="pre">GET</span></code> requests for everyone while forcing
validation on edits (<code class="docutils literal notranslate"><span class="pre">POST</span></code>, <code class="docutils literal notranslate"><span class="pre">PUT</span></code>, <code class="docutils literal notranslate"><span class="pre">PATCH</span></code>, <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>).</p>
</div>
<div class="section" id="endpoint-level-authentication">
<h2>Endpoint-level Authentication<a class="headerlink" href="#endpoint-level-authentication" title="Permalink to this headline">¶</a></h2>
<p>The <em>one class to bind them all</em> approach seen above is probably good for most
use cases but as soon as authorization logic gets more complicated it could
easily lead to complex and unmanageable code, something you don’t really want
to have when dealing with security.</p>
<p>Wouldn’t it be nice if we could have specialized auth classes that we could
freely apply to selected endpoints? This way the global level auth class, the
one passed to the Eve constructor as seen above, would still be active on all
endpoints except those where different authorization logic is needed.
Alternatively, we could even choose to <em>not</em> provide a global auth class,
effectively making all endpoints public, except the ones we want protected.
With a system like this we could even choose to have some endpoints protected
with, say, Basic Authentication while others are secured with Token, or HMAC
Authentication!</p>
<p>Well, turns out this is actually possible by simply enabling the
resource-level <code class="docutils literal notranslate"><span class="pre">authentication</span></code> setting when we are defining the API
<a class="reference internal" href="config.html#domain"><span class="std std-ref">domain</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DOMAIN</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;people&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;authentication&#39;</span><span class="p">:</span> <span class="n">MySuperCoolAuth</span><span class="p">,</span>
        <span class="o">...</span>
        <span class="p">},</span>
    <span class="s1">&#39;invoices&#39;</span><span class="p">:</span> <span class="o">...</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>And that’s it. The <cite>people</cite> endpoint will now be using the <code class="docutils literal notranslate"><span class="pre">MySuperCoolAuth</span></code>
class for authentication, while the <code class="docutils literal notranslate"><span class="pre">invoices</span></code> endpoint  will be using the
general-purpose auth class if provided or else it will just be open to the
public.</p>
<p>There are other features and options that you can use to reduce complexity in
your auth classes, especially (but not only) when using the global level
authentication system. Lets review them.</p>
</div>
<div class="section" id="global-endpoint-security">
<h2>Global Endpoint Security<a class="headerlink" href="#global-endpoint-security" title="Permalink to this headline">¶</a></h2>
<p>You might want a public read-only API where only authorized users can write,
edit and delete. You can achieve that by using the <code class="docutils literal notranslate"><span class="pre">PUBLIC_METHODS</span></code> and
<code class="docutils literal notranslate"><span class="pre">PUBLIC_ITEM_METHODS</span></code> <a class="reference internal" href="config.html#global"><span class="std std-ref">global settings</span></a>. Add the following to
your <cite>settings.py</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PUBLIC_METHODS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">]</span>
<span class="n">PUBLIC_ITEM_METHODS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>And run your API. POST, PATCH and DELETE are still restricted, while GET is
publicly available at all API endpoints. <code class="docutils literal notranslate"><span class="pre">PUBLIC_METHODS</span></code> refers to resource
endpoints, like <code class="docutils literal notranslate"><span class="pre">/people</span></code>, while <code class="docutils literal notranslate"><span class="pre">PUBLIC_ITEM_METHODS</span></code> refers to individual
items like <code class="docutils literal notranslate"><span class="pre">/people/id</span></code>.</p>
</div>
<div class="section" id="custom-endpoint-security">
<span id="endpointsec"></span><h2>Custom Endpoint Security<a class="headerlink" href="#custom-endpoint-security" title="Permalink to this headline">¶</a></h2>
<p>Suppose that you want to allow public read access to only certain resources.
You do that by declaring public methods at resource level, while declaring the
API <a class="reference internal" href="config.html#domain"><span class="std std-ref">domain</span></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DOMAIN</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;people&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;public_methods&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">],</span>
        <span class="s1">&#39;public_item_methods&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">],</span>
        <span class="p">},</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Be aware that, when present, <a class="reference internal" href="config.html#local"><span class="std std-ref">resource settings</span></a> override global
settings. You can use this to your advantage. Suppose that you want to grant
read access to all endpoints with the only exception of <code class="docutils literal notranslate"><span class="pre">/invoices</span></code>.  You
first open read access for all endpoints:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PUBLIC_METHODS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">]</span>
<span class="n">PUBLIC_ITEM_METHODS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Then you protect the private endpoint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DOMAIN</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;invoices&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;public_methods&#39;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s1">&#39;public_item_methods&#39;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Effectively making <cite>invoices</cite> a restricted resource.</p>
</div>
<div class="section" id="basic-authentication">
<span id="basic"></span><h2>Basic Authentication<a class="headerlink" href="#basic-authentication" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">eve.auth.BasicAuth</span></code> class allows the implementation of Basic
Authentication (RFC2617). It should be subclassed in order to implement custom
authentication.</p>
<div class="section" id="basic-authentication-with-bcrypt">
<h3>Basic Authentication with bcrypt<a class="headerlink" href="#basic-authentication-with-bcrypt" title="Permalink to this headline">¶</a></h3>
<p>Encoding passwords with <a class="reference external" href="http://en.wikipedia.org/wiki/Bcrypt">bcrypt</a> is a great idea. It comes at the cost of
performance, but that’s precisely the point, as slow encoding means very good
resistance to brute-force attacks. For a faster (and less safe) alternative, see
the SHA1/MAC snippet further below.</p>
<p>This script assumes that user accounts are stored in an <cite>accounts</cite> MongoDB
collection, and that passwords are stored as bcrypt hashes. All API
resources/methods will be secured unless they are made explicitly public.</p>
<div class="admonition-please-note admonition">
<p class="first admonition-title">Please note</p>
<p class="last">You will need to install <cite>py-bcrypt</cite> for this to work.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Auth-BCrypt</span>
<span class="sd">    ~~~~~~~~~~~</span>

<span class="sd">    Securing an Eve-powered API with Basic Authentication (RFC2617).</span>

<span class="sd">    You will need to install py-bcrypt: ``pip install py-bcrypt``</span>

<span class="sd">    This snippet by Nicola Iarocci can be used freely for anything you like.</span>
<span class="sd">    Consider it public domain.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">bcrypt</span>
<span class="kn">from</span> <span class="nn">eve</span> <span class="kn">import</span> <span class="n">Eve</span>
<span class="kn">from</span> <span class="nn">eve.auth</span> <span class="kn">import</span> <span class="n">BasicAuth</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">current_app</span> <span class="k">as</span> <span class="n">app</span>

<span class="k">class</span> <span class="nc">BCryptAuth</span><span class="p">(</span><span class="n">BasicAuth</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">check_auth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">allowed_roles</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="c1"># use Eve&#39;s own db driver; no additional connections/resources are used</span>
        <span class="n">accounts</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="s1">&#39;accounts&#39;</span><span class="p">]</span>
        <span class="n">account</span> <span class="o">=</span> <span class="n">accounts</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">account</span> <span class="ow">and</span> \
            <span class="n">bcrypt</span><span class="o">.</span><span class="n">hashpw</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="n">account</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="n">account</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Eve</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="n">BCryptAuth</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-authentication-with-sha1-hmac">
<h3>Basic Authentication with SHA1/HMAC<a class="headerlink" href="#basic-authentication-with-sha1-hmac" title="Permalink to this headline">¶</a></h3>
<p>This script assumes that user accounts are stored in an <cite>accounts</cite> MongoDB
collection, and that passwords are stored as SHA1/HMAC hashes. All API
resources/methods will be secured unless they are made explicitly public.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Auth-SHA1/HMAC</span>
<span class="sd">    ~~~~~~~~~~~~~~</span>

<span class="sd">    Securing an Eve-powered API with Basic Authentication (RFC2617).</span>

<span class="sd">    Since we are using werkzeug we don&#39;t need any extra import (werkzeug being</span>
<span class="sd">    one of Flask/Eve prerequisites).</span>

<span class="sd">    This snippet by Nicola Iarocci can be used freely for anything you like.</span>
<span class="sd">    Consider it public domain.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">eve</span> <span class="kn">import</span> <span class="n">Eve</span>
<span class="kn">from</span> <span class="nn">eve.auth</span> <span class="kn">import</span> <span class="n">BasicAuth</span>
<span class="kn">from</span> <span class="nn">werkzeug.security</span> <span class="kn">import</span> <span class="n">check_password_hash</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">current_app</span> <span class="k">as</span> <span class="n">app</span>

<span class="k">class</span> <span class="nc">Sha1Auth</span><span class="p">(</span><span class="n">BasicAuth</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">check_auth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">allowed_roles</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="c1"># use Eve&#39;s own db driver; no additional connections/resources are used</span>
        <span class="n">accounts</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="s1">&#39;accounts&#39;</span><span class="p">]</span>
        <span class="n">account</span> <span class="o">=</span> <span class="n">accounts</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">account</span> <span class="ow">and</span> \
            <span class="n">check_password_hash</span><span class="p">(</span><span class="n">account</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">],</span> <span class="n">password</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Eve</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="n">Sha1Auth</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="token-based-authentication">
<span id="token"></span><h2>Token-Based Authentication<a class="headerlink" href="#token-based-authentication" title="Permalink to this headline">¶</a></h2>
<p>Token-based authentication can be considered a specialized version of Basic
Authentication. The Authorization header tag will contain the auth token as the
username, and no password.</p>
<p>This script assumes that user accounts are stored in an <cite>accounts</cite> MongoDB
collection. All API resources/methods will be secured unless they are made
explicitly public (by fiddling with some settings you can open one or more
resources and/or methods to public access -see docs).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Auth-Token</span>
<span class="sd">    ~~~~~~~~~~</span>

<span class="sd">    Securing an Eve-powered API with Token based Authentication.</span>

<span class="sd">    This snippet by Nicola Iarocci can be used freely for anything you like.</span>
<span class="sd">    Consider it public domain.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">eve</span> <span class="kn">import</span> <span class="n">Eve</span>
<span class="kn">from</span> <span class="nn">eve.auth</span> <span class="kn">import</span> <span class="n">TokenAuth</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">current_app</span> <span class="k">as</span> <span class="n">app</span>

<span class="k">class</span> <span class="nc">TokenAuth</span><span class="p">(</span><span class="n">TokenAuth</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">check_auth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">allowed_roles</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;For the purpose of this example the implementation is as simple as</span>
<span class="sd">        possible. A &#39;real&#39; token should probably contain a hash of the</span>
<span class="sd">        username/password combo, which sould then validated against the account</span>
<span class="sd">        data stored on the DB.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># use Eve&#39;s own db driver; no additional connections/resources are used</span>
        <span class="n">accounts</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="s1">&#39;accounts&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">accounts</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s1">&#39;token&#39;</span><span class="p">:</span> <span class="n">token</span><span class="p">})</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Eve</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="n">TokenAuth</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="hmac-authentication">
<h2>HMAC Authentication<a class="headerlink" href="#hmac-authentication" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">eve.auth.HMACAuth</span></code> class allows for custom, Amazon S3-like, HMAC (Hash
Message Authentication Code) authentication, which is basically a very secure
custom authentication scheme built around the <cite>Authorization</cite> header.</p>
<div class="section" id="how-hmac-authentication-works">
<h3>How HMAC Authentication Works<a class="headerlink" href="#how-hmac-authentication-works" title="Permalink to this headline">¶</a></h3>
<p>The server provides the client with a user id and a secret key through some
out-of-band technique (e.g., the service sends the client an e-mail
containing the user id and secret key). The client will use the supplied
secret key to sign all requests.</p>
<p>When the client wants to send a request, he builds the complete request and
then, using the secret key, computes a hash over the complete message body (and
optionally some of the message headers if required)</p>
<p>Next, the client adds the computed hash and his userid to the message in the
Authorization header:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Authorization</span><span class="p">:</span> <span class="n">johndoe</span><span class="p">:</span><span class="n">uCMfSzkjue</span><span class="o">+</span><span class="n">HSDygYB5aEg</span><span class="o">==</span>
</pre></div>
</div>
<p>and sends it to the service. The service retrieves the userid from the
message header and searches the private key for that user in its own
database. Next it computes the hash over the message body (and selected
headers) using the key to generate its hash. If the hash the client sends
matches the hash the server computes, then the server knows the message was
sent by the real client and was not altered in any way.</p>
<p>Really the only tricky part is sharing a secret key with the user and keeping
that secure. That is why some services allow for generation of shared keys
with a limited life time so you can give the key to a third party to
temporarily work on your behalf. This is also the reason why the secret key
is generally provided through out-of-band channels (often a webpage or, as
said above, an email or plain old paper).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">eve.auth.HMACAuth</span></code>  class also support access roles.</p>
</div>
<div class="section" id="hmac-example">
<h3>HMAC Example<a class="headerlink" href="#hmac-example" title="Permalink to this headline">¶</a></h3>
<p>The snippet below can also be found in the <cite>examples/security</cite> folder of the
Eve <a class="reference external" href="https://github.com/pyeve/eve">repository</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">eve</span> <span class="kn">import</span> <span class="n">Eve</span>
<span class="kn">from</span> <span class="nn">eve.auth</span> <span class="kn">import</span> <span class="n">HMACAuth</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">current_app</span> <span class="k">as</span> <span class="n">app</span>
<span class="kn">from</span> <span class="nn">hashlib</span> <span class="kn">import</span> <span class="n">sha1</span>
<span class="kn">import</span> <span class="nn">hmac</span>


<span class="k">class</span> <span class="nc">HMACAuth</span><span class="p">(</span><span class="n">HMACAuth</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">check_auth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">userid</span><span class="p">,</span> <span class="n">hmac_hash</span><span class="p">,</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">allowed_roles</span><span class="p">,</span>
                   <span class="n">resource</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="c1"># use Eve&#39;s own db driver; no additional connections/resources are</span>
        <span class="c1"># used</span>
        <span class="n">accounts</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="s1">&#39;accounts&#39;</span><span class="p">]</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">accounts</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s1">&#39;userid&#39;</span><span class="p">:</span> <span class="n">userid</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
            <span class="n">secret_key</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;secret_key&#39;</span><span class="p">]</span>
        <span class="c1"># in this implementation we only hash request data, ignoring the</span>
        <span class="c1"># headers.</span>
        <span class="k">return</span> <span class="n">user</span> <span class="ow">and</span> \
            <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">secret_key</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">sha1</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span> <span class="o">==</span> \
                <span class="n">hmac_hash</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Eve</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="n">HMACAuth</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="role-based-access-control">
<span id="roleaccess"></span><h2>Role Based Access Control<a class="headerlink" href="#role-based-access-control" title="Permalink to this headline">¶</a></h2>
<p>The code snippets above deliberately ignore the <code class="docutils literal notranslate"><span class="pre">allowed_roles</span></code> parameter.
You can use this parameter to restrict access to authenticated users who also
have been assigned specific roles.</p>
<p>First, you would use the new <code class="docutils literal notranslate"><span class="pre">ALLOWED_ROLES</span></code> and <code class="docutils literal notranslate"><span class="pre">ALLOWED_ITEM_ROLES</span></code> <a class="reference internal" href="config.html#global"><span class="std std-ref">global
settings</span></a> (or the corresponding <code class="docutils literal notranslate"><span class="pre">allowed_roles</span></code> and <code class="docutils literal notranslate"><span class="pre">allowed_item_roles</span></code>
<a class="reference internal" href="config.html#local"><span class="std std-ref">resource settings</span></a>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALLOWED_ROLES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;admin&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Then your subclass would implement the authorization logic by making good use
of the aforementioned <code class="docutils literal notranslate"><span class="pre">allowed_roles</span></code> parameter.</p>
<p>The snippet below assumes that user accounts are stored in an <cite>accounts</cite>
MongoDB collection, that passwords are stored as SHA1/HMAC hashes and that user
roles are stored in a ‘roles’ array. All API resources/methods will be secured
unless they are made explicitly public.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Auth-SHA1/HMAC-Roles</span>
<span class="sd">    ~~~~~~~~~~~~~~~~~~~~</span>

<span class="sd">    Securing an Eve-powered API with Basic Authentication (RFC2617) and user</span>
<span class="sd">    roles.</span>

<span class="sd">    Since we are using werkzeug we don&#39;t need any extra import (werkzeug being</span>
<span class="sd">    one of Flask/Eve prerequisites).</span>

<span class="sd">    This snippet by Nicola Iarocci can be used freely for anything you like.</span>
<span class="sd">    Consider it public domain.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">eve</span> <span class="kn">import</span> <span class="n">Eve</span>
<span class="kn">from</span> <span class="nn">eve.auth</span> <span class="kn">import</span> <span class="n">BasicAuth</span>
<span class="kn">from</span> <span class="nn">werkzeug.security</span> <span class="kn">import</span> <span class="n">check_password_hash</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">current_app</span> <span class="k">as</span> <span class="n">app</span>

<span class="k">class</span> <span class="nc">RolesAuth</span><span class="p">(</span><span class="n">BasicAuth</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">check_auth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">allowed_roles</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="c1"># use Eve&#39;s own db driver; no additional connections/resources are used</span>
        <span class="n">accounts</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="s1">&#39;accounts&#39;</span><span class="p">]</span>
        <span class="n">lookup</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">allowed_roles</span><span class="p">:</span>
            <span class="c1"># only retrieve a user if his roles match ``allowed_roles``</span>
            <span class="n">lookup</span><span class="p">[</span><span class="s1">&#39;roles&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;$in&#39;</span><span class="p">:</span> <span class="n">allowed_roles</span><span class="p">}</span>
        <span class="n">account</span> <span class="o">=</span> <span class="n">accounts</span><span class="o">.</span><span class="n">find_one</span><span class="p">(</span><span class="n">lookup</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">account</span> <span class="ow">and</span> <span class="n">check_password_hash</span><span class="p">(</span><span class="n">account</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">],</span> <span class="n">password</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Eve</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="n">RolesAuth</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="user-restricted-resource-access">
<span id="user-restricted"></span><h2>User-Restricted Resource Access<a class="headerlink" href="#user-restricted-resource-access" title="Permalink to this headline">¶</a></h2>
<p>When this feature is enabled, each stored document is associated with the
account that created it. This allows the API to transparently serve only
account-created documents on all kinds of requests: read, edit, delete and of
course create.  User authentication needs to be enabled for this to work
properly.</p>
<p>At the global level this feature is enabled by setting <code class="docutils literal notranslate"><span class="pre">AUTH_FIELD</span></code> and locally
(at the endpoint level) by setting <code class="docutils literal notranslate"><span class="pre">auth_field</span></code>. These properties define the name
of the field used to store the id of the user who created the document.  So for
example by setting <code class="docutils literal notranslate"><span class="pre">AUTH_FIELD</span></code> to <code class="docutils literal notranslate"><span class="pre">user_id</span></code>, you are effectively (and
transparently to the user) adding a <code class="docutils literal notranslate"><span class="pre">user_id</span></code> field to every stored
document. This will then be used to retrieve/edit/delete documents stored by
the user.</p>
<p>But how do you set the <code class="docutils literal notranslate"><span class="pre">auth_field</span></code> value? By invoking the
<code class="docutils literal notranslate"><span class="pre">set_request_auth_value()</span></code> class method. Let us revise our
BCrypt-authentication example from above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="c1"># -*- coding: utf-8 -*-</span>

 <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     Auth-BCrypt</span>
<span class="sd">     ~~~~~~~~~~~</span>

<span class="sd">     Securing an Eve-powered API with Basic Authentication (RFC2617).</span>

<span class="sd">     You will need to install py-bcrypt: ``pip install py-bcrypt``</span>

<span class="sd">     This snippet by Nicola Iarocci can be used freely for anything you like.</span>
<span class="sd">     Consider it public domain.</span>
<span class="sd"> &quot;&quot;&quot;</span>

 <span class="kn">import</span> <span class="nn">bcrypt</span>
 <span class="kn">from</span> <span class="nn">eve</span> <span class="kn">import</span> <span class="n">Eve</span>
 <span class="kn">from</span> <span class="nn">eve.auth</span> <span class="kn">import</span> <span class="n">BasicAuth</span>


 <span class="k">class</span> <span class="nc">BCryptAuth</span><span class="p">(</span><span class="n">BasicAuth</span><span class="p">):</span>
     <span class="k">def</span> <span class="nf">check_auth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">allowed_roles</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
         <span class="c1"># use Eve&#39;s own db driver; no additional connections/resources are used</span>
         <span class="n">accounts</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="s1">&#39;accounts&#39;</span><span class="p">]</span>
         <span class="n">account</span> <span class="o">=</span> <span class="n">accounts</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">})</span>
<span class="hll">         <span class="c1"># set &#39;auth_field&#39; value to the account&#39;s ObjectId</span>
</span><span class="hll">         <span class="c1"># (instead of _id, you might want to use ID_FIELD)</span>
</span><span class="hll">         <span class="k">if</span> <span class="n">account</span> <span class="ow">and</span> <span class="s1">&#39;_id&#39;</span> <span class="ow">in</span> <span class="n">account</span><span class="p">:</span>
</span><span class="hll">             <span class="bp">self</span><span class="o">.</span><span class="n">set_request_auth_value</span><span class="p">(</span><span class="n">account</span><span class="p">[</span><span class="s1">&#39;_id&#39;</span><span class="p">])</span>
</span>         <span class="k">return</span> <span class="n">account</span> <span class="ow">and</span> \
             <span class="n">bcrypt</span><span class="o">.</span><span class="n">hashpw</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="n">account</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="n">account</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span>


 <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
     <span class="n">app</span> <span class="o">=</span> <span class="n">Eve</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="n">BCryptAuth</span><span class="p">)</span>
     <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="auth-driven-database-access">
<span id="authdrivendb"></span><h2>Auth-driven Database Access<a class="headerlink" href="#auth-driven-database-access" title="Permalink to this headline">¶</a></h2>
<p>Custom authentication classes can also set the database that should be used
when serving the active request.</p>
<p>Normally you either use a single database for the whole API or you configure
which database each endpoint consumes by setting <code class="docutils literal notranslate"><span class="pre">mongo_prefix</span></code> to the
desired value (see <a class="reference internal" href="config.html#local"><span class="std std-ref">Resource / Item Endpoints</span></a>).</p>
<p>However, you might opt to select the target database based on the active token,
user or client. This is handy if your use-case includes user-dedicated database
instances. All you have to do is set invoke the <code class="docutils literal notranslate"><span class="pre">set_mongo_prefix()</span></code> method
when authenticating the request.</p>
<p>A trivial example would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">eve.auth</span> <span class="kn">import</span> <span class="n">BasicAuth</span>

<span class="k">class</span> <span class="nc">MyBasicAuth</span><span class="p">(</span><span class="n">BasicAuth</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">check_auth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">allowed_roles</span><span class="p">,</span> <span class="n">resource</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;user1&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_mongo_prefix</span><span class="p">(</span><span class="s1">&#39;MONGO1&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;user2&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_mongo_prefix</span><span class="p">(</span><span class="s1">&#39;MONGO2&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># serve all other users from the default db.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_mongo_prefix</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">username</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">password</span> <span class="o">==</span> <span class="s1">&#39;secret&#39;</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Eve</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="n">MyBasicAuth</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>The above class will serve <code class="docutils literal notranslate"><span class="pre">user1</span></code> with data coming from the database which
configuration settings are prefixed by <code class="docutils literal notranslate"><span class="pre">MONGO1</span></code> in <code class="docutils literal notranslate"><span class="pre">settings.py</span></code>. Same
happens with <code class="docutils literal notranslate"><span class="pre">user2</span></code> and <code class="docutils literal notranslate"><span class="pre">MONGO2</span></code> while all other users are served with
the default database.</p>
<p>Since values set by <code class="docutils literal notranslate"><span class="pre">set_mongo_prefix()</span></code> have precedence over both default
and endpoint-level <code class="docutils literal notranslate"><span class="pre">mongo_prefix</span></code> settings, what happens here is that the two
users will always be served from their reserved databases, no matter the
eventual database configuration for the endpoint.</p>
</div>
<div class="section" id="oauth2-integration">
<h2>OAuth2 Integration<a class="headerlink" href="#oauth2-integration" title="Permalink to this headline">¶</a></h2>
<p>Since you have total control over the Authorization process, integrating
OAuth2 with Eve is easy. Make yourself comfortable with the topics illustrated
in this page, then head over to <a class="reference external" href="https://github.com/pyeve/eve-oauth2">Eve-OAuth2</a>, an example project which
leverages <a class="reference external" href="https://github.com/pyeve/flask-sentinel">Flask-Sentinel</a> to demonstrate how you can protect your API with
OAuth2.</p>
<div class="admonition-please-note admonition">
<p class="first admonition-title">Please note</p>
<p class="last">The snippets in this page can also be found in the <cite>examples/security</cite>
folder of the Eve <a class="reference external" href="https://github.com/pyeve/eve">repository</a>.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/eve_leaf.png" alt="Logo"/>
    
  </a>
</p>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=pyeve&repo=eve&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Stay Informed</h3>
<p>Receive updates on new releases and upcoming projects.</p>

<p><a href="https://twitter.com/nicolaiarocci" class="twitter-follow-button" data-show-count="false">Follow
    @nicolaiarocci</a>
  <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + '://platform.twitter.com/widgets.js'; fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'twitter-wjs');</script>
</p>

<p><iframe src="http://ghbtns.com/github-btn.html?user=nicolaiarocci&type=follow&count=false" allowtransparency="true"
    frameborder="0" scrolling="0" width="200" height="20"></iframe></p>

<p><a href="http://tinyletter.com/nicolaiarocci">Join Mailing List</a>.</p>

<h3>Eve Course</h3>
<p>This course will teach you how to build RESTful services with Eve and MongoDB.</p>
<p>The teacher is the project creator and maintainer.</p>
<ul>
  <li><a href="https://training.talkpython.fm/courses/explore_eve/eve-building-restful-mongodb-backed-apis-course">Eve
      Course @ TalkPython</a></li>
</ul>

<h3>Useful Links</h3>
<ul>
  <li><a href="https://github.com/pyeve/eve">Eve @ GitHub</a></li>
  <li><a href="https://stackoverflow.com/questions/tagged/eve">Eve @ Stack Overflow</a></li>
  <li><a href="https://groups.google.com/forum/?hl=en#!forum/python-eve">Eve @ Google Groups</a></li>
  <li><a href="irc://irc.freenode.net/python-eve">Eve @ IRC</a>
  <li><a href="https://pypi.org/project/Eve/">Eve @ PyPI</a></li>
  <li><a href="https://nicolaiarocci.com/tags/eve/">Eve @ Nicola Iarocci</a></li>
  <li><a href="https://github.com/pyeve/eve/issues">Issue Tracker</a></li>
</ul>

<h3>Other Projects</h3>

<p>More <a href="http://nicolaiarocci.com/">Nicola Iarocci</a> projects:</p>
<ul>
  <li><a href="http://python-cerberus.org/">Cerberus</a></li>
  <li><a href="https://github.com/pyeve/events">Events</a></li>
  <li><a href="https://github.com/pyeve/flask-sentinel">Flask-Sentinel</a></li>
  <li><a href="https://github.com/nicolaiarocci/flask-mimerender">Flask-MimeRender</a></li>
  <li><a href="https://github.com/pyeve/eve-demo">Eve-Demo</a></li>
  <li><a href="https://github.com/pyeve/eve-demo-client">Eve-Demo Client</a></li>
  <li><a href="https://github.com/pyeve/eve-swagger">Eve-Swagger</a></li>
  <li><a href="https://github.com/pyeve/eve-oauth2">Eve-OAuth2</a></li>
</ul><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="foreword.html">Foreword</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest_api_for_humans.html">REST API for Humans</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Data Validation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Authentication and Authorization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction-to-security">Introduction to Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="#global-authentication">Global Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="#endpoint-level-authentication">Endpoint-level Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="#global-endpoint-security">Global Endpoint Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="#custom-endpoint-security">Custom Endpoint Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-authentication">Basic Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-authentication-with-bcrypt">Basic Authentication with bcrypt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-authentication-with-sha1-hmac">Basic Authentication with SHA1/HMAC</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#token-based-authentication">Token-Based Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hmac-authentication">HMAC Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-hmac-authentication-works">How HMAC Authentication Works</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hmac-example">HMAC Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#role-based-access-control">Role Based Access Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="#user-restricted-resource-access">User-Restricted Resource Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="#auth-driven-database-access">Auth-driven Database Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="#oauth2-integration">OAuth2 Integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="funding.html">Funding</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="snippets/index.html">Snippets</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="updates.html">Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Licensing</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Eve Changelog</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p>
Artwork by <a href="http://kalamun.org">Kalamun</a> © 2013
</p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
      &copy;2019. Python-Eve is a <a href="http://nicolaiarocci.com">Nicola Iarocci</a> Project.
      
    </div>

    
    <a href="https://github.com/pyeve/eve" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="_static/forkme_right_green_007200.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19006041-6', 'auto');
    ga('send', 'pageview');

</script>

  </body>
</html>